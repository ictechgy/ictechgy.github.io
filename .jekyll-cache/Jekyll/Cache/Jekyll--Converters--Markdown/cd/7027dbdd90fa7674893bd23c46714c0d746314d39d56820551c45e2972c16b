I"¸<p>Swiftë¥¼ ë‹¤ì‹œ ê³µë¶€í•˜ë˜ ë„ì¤‘ ê¸°ë¡í•˜ë©´ ì¢‹ì„ë§Œí•œ ë¶€ë¶„ì´ ìˆì–´ì„œ ì‘ì„±í•œë‹¤.</p>

<p>Any?, AnyObject? ê°™ì€ ì˜µì…”ë„ì´ ì•„ë‹Œ Any, AnyObject ë“±ì—ëŠ” nilì„ ì§ì ‘ì ìœ¼ë¡œ ë„£ì„ ìˆ˜ ì—†ë‹¤. í•˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” ê°€ëŠ¥í•˜ë‹¤.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">a</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="k">let</span> <span class="nv">b</span><span class="p">:</span> <span class="kt">Any</span> <span class="o">=</span> <span class="n">a</span> <span class="k">as</span> <span class="kt">Any</span>   <span class="c1">//syntax errorê°€ ëœ¨ì§€ ì•ŠëŠ”ë‹¤. 'Any?'ë¡œ ì“°ì‹­ì‹œì˜¤!ë¼ê³  ëœ° ì¤„ ì•Œì•˜ëŠ”ë°..</span>

<span class="c1">//ë˜ëŠ”</span>
<span class="k">let</span> <span class="nv">c</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="k">let</span> <span class="nv">d</span><span class="p">:</span> <span class="kt">AnyObject</span> <span class="o">=</span> <span class="n">c</span> <span class="k">as</span> <span class="kt">AnyObject</span>
</code></pre></div></div>
<p>bëŠ” ì‹¤ì§ˆì ìœ¼ë¡œ nilì´ì§€ë§Œ nilì´ ì•„ë‹Œ ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤. ì´ëŸ° ë¶€ë¶„ì— ìˆì–´ ìœ ì˜í•˜ë„ë¡ í•˜ì. (dë„ ë§ˆì°¬ê°€ì§€. ê°’ ìì²´ê°€ ë³µì‚¬ëëŠëƒ ì°¸ì¡°ê°€ ë³µì‚¬ëëŠëƒì˜ ì°¨ì´ëŠ” ì¡´ì¬)</p>

<p>Â </p>

<p>ìœ„ì™€ ê°™ì€ ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì€ <a href="https://github.com/ReactiveX/RxSwift/blob/main/RxExample/Extensions/CLLocationManager%2BRx.swift">RxSwift Github - â€˜CLLocationManager+Rxâ€™ Example</a>ì„ í†µí•´ ì•Œì•˜ë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">func</span> <span class="n">castOptionalOrThrow</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">resultType</span><span class="p">:</span> <span class="kt">T</span><span class="o">.</span><span class="k">Type</span><span class="p">,</span> <span class="n">_</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">Any</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">T</span><span class="p">?</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kt">NSNull</span><span class="p">()</span><span class="o">.</span><span class="nf">isEqual</span><span class="p">(</span><span class="n">object</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// object == nil ë¡œ ì¡°ê±´ë¬¸ì„ ë°”ê¾¸ë©´ warning í‘œì‹œ.</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
		 <span class="c1">//NSNull: nilì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ì½œë ‰ì…˜ì—ì„œ null valueë¥¼ ëŒ€í‘œí•˜ëŠ” ì‹±ê¸€í†¤ ì˜¤ë¸Œì íŠ¸</span>
     <span class="c1">//nilì´ì§€ë§Œ nilì´ ì•„ë‹Œê²ƒì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆë‹¤ëŠ” ê±´ê°€?</span>

    <span class="k">guard</span> <span class="k">let</span> <span class="nv">returnValue</span> <span class="o">=</span> <span class="n">object</span> <span class="k">as?</span> <span class="kt">T</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="kt">RxCocoaError</span><span class="o">.</span><span class="nf">castingError</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="n">object</span><span class="p">,</span> <span class="nv">targetType</span><span class="p">:</span> <span class="n">resultType</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">returnValue</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ë§í¬ ë§¨ ë°‘ì— ìœ„ì™€ ê°™ì€ í•¨ìˆ˜ê°€ ìˆëŠ”ë° â€˜nilì¼ ìˆ˜ ìˆëŠ” ì¸ìë¥¼ Any?ê°€ ì•„ë‹Œ Anyíƒ€ì…ì˜ objectë¡œ ë°›ëŠ” ê²ƒâ€™ê³¼ ë‚´ë¶€ì—ì„œ â€˜nil ì²´í¬ë¥¼ NSNull().isEqual()ë¡œ í•˜ëŠ” ê²ƒâ€™ì„ ë³´ê³ .. ì²˜ìŒì— êµ‰ì¥íˆ í˜¼ë€ìŠ¤ëŸ¬ì› ë‹¤. ì™œ object íŒŒë¼ë¯¸í„°ê°€ Any?íƒ€ì…ì´ ì•„ë‹Œ Anyì¼ê¹Œ í•˜ë©´ì„œ.. ë¬¼ë¡  ì™¸ë¶€ì—ì„œ ë„˜ì–´ì˜¤ëŠ” ê²ƒ ìì²´ê°€ [Any]ì—ì„œ í•˜ë‚˜ë¥¼ ê³ ë¥¸ Anyì´ê¸°ëŠ” í•˜ì§€ë§Œ.</p>

<p>delegate.methodInvoked()ì— ì˜í•´ ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ë“¤ì€ Anyë¡œ ìºìŠ¤íŒ…ë˜ê³  [Any] ë°°ì—´ë¡œ ë°˜í™˜ëœë‹¤. ë”°ë¼ì„œ íŠ¹ì • íŒŒë¼ë¯¸í„°ëŠ” Anyíƒ€ì…ì´ë¼ê³  ë³´ì—¬ë„ ì‚¬ì‹¤ì€ nilì¼ ìˆ˜ ìˆë‹¤. (ì´ë¥¼í…Œë©´ CLLocationManagerDelegate - didFinishDeferredUpdatesWithErrorì˜ ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” Error? ì˜µì…”ë„ì¸ë°, Anyë¡œ ìºìŠ¤íŒ…ë˜ì–´ë„ ì‚¬ì‹¤ nilì¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ) <br />
ê·¸ë ‡ë‹¤ë©´ methodInvoked()ì— ì˜í•´ ë°˜í™˜ë˜ëŠ” ì‹œí€€ìŠ¤ê°€ Observable&lt;Any&gt;ê°€ ì•„ë‹Œ Observable&lt;Any?&gt;ì´ì–´ì•¼ í•˜ëŠ” ê²ƒ ì•„ë‹Œê°€?</p>

<p>Â </p>
<h1 id="ë‹¤ë¥¸-íƒ€ì…ìºìŠ¤íŒ…ì—…ìºìŠ¤íŒ…ì—ë„-ë˜ëŠ”ê±¸ê¹Œ">ë‹¤ë¥¸ íƒ€ì…ìºìŠ¤íŒ…(ì—…ìºìŠ¤íŒ…)ì—ë„ ë˜ëŠ”ê±¸ê¹Œ?</h1>
<p>ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ ì•ˆëœë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//struct í…ŒìŠ¤íŠ¸</span>
<span class="kd">protocol</span> <span class="kt">ParentProtocol</span> <span class="p">{}</span>
<span class="kd">struct</span> <span class="kt">DescendantStruct</span><span class="p">:</span> <span class="kt">ParentProtocol</span> <span class="p">{}</span>

<span class="k">let</span> <span class="nv">descendant</span><span class="p">:</span> <span class="kt">DescendantStruct</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="k">let</span> <span class="nv">parent</span><span class="p">:</span> <span class="kt">ParentProtocol</span> <span class="o">=</span> <span class="n">descendant</span> <span class="k">as</span> <span class="kt">ParentProtocol</span>
</code></pre></div></div>
<pre>
<span style="color:orange">asdsad</span>
</pre>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//class, protocol í…ŒìŠ¤íŠ¸</span>
<span class="kd">protocol</span> <span class="kt">ParentProtocol</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="kt">DescendantClass</span><span class="p">:</span> <span class="kt">ParentProtocol</span> <span class="p">{}</span>

<span class="k">let</span> <span class="nv">descendant</span><span class="p">:</span> <span class="kt">DescendantClass</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="k">let</span> <span class="nv">parent</span><span class="p">:</span> <span class="kt">ParentProtocol</span> <span class="o">=</span> <span class="n">descendant</span> <span class="k">as</span> <span class="kt">ParentProtocol</span>
</code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//class í…ŒìŠ¤íŠ¸</span>
<span class="kd">class</span> <span class="kt">ParentClass</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="kt">DescendantClass</span><span class="p">:</span> <span class="kt">ParentClass</span> <span class="p">{}</span>

<span class="k">let</span> <span class="nv">descendant</span><span class="p">:</span> <span class="kt">DescendantClass</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="k">let</span> <span class="nv">parent</span><span class="p">:</span> <span class="kt">ParentClass</span> <span class="o">=</span> <span class="n">descendant</span> <span class="k">as</span> <span class="kt">ParentClass</span>

</code></pre></div></div>
:ET