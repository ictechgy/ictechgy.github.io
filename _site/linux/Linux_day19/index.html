<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Linux_day19 - 개발 끄적끄적</title>
<meta name="description" content="File System &amp; Disk Management ">


  <meta name="author" content="JJanghong">


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="개발 끄적끄적">
<meta property="og:title" content="Linux_day19">
<meta property="og:url" content="https://ictechgy.github.io/linux/Linux_day19/">


  <meta property="og:description" content="File System &amp; Disk Management ">



  <meta property="og:image" content="https://ictechgy.github.io/assets/images/photo-hangang.jpeg">





  <meta property="article:published_time" content="2020-05-26T00:00:00+09:00">





  

  


<link rel="canonical" href="https://ictechgy.github.io/linux/Linux_day19/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "dev blog",
      "url": "https://ictechgy.github.io/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="개발 끄적끄적 Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          개발 끄적끄적
          <span class="site-subtitle">개발공부</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/">Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li><li class="masthead__menu-item">
              <a href="">About</a>
            </li><li class="masthead__menu-item">
              <a href="/about/"></a>
            </li><li class="masthead__menu-item">
              <a href="">연도별</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/"></a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">토글 메뉴</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/photo-avatar.jpeg" alt="JJanghong" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">JJanghong</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>공부중입니다.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">팔로우</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Republic of Korea</span>
        </li>
      

      
        
          
            <li><a href="mailto:ictechgy@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
        
          
        
          
        
          
            <li><a href="https://github.com/ictechgy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Linux_day19">
    <meta itemprop="description" content="File System &amp; Disk Management">
    <meta itemprop="datePublished" content="2020-05-26T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Linux_day19
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  13 분 소요

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>File System &amp; Disk Management</p>

<p>File System
컴퓨터에 파일이나 자료를 쉽게 발견 및 접근할 수 있도록 보관 또는 조직하는 체제를 가리키는 말
통상 하드디스크나 CD-ROM 같은 실제 자료보관장치를 사용하여 파일의 물리적인 소재를 관리하는 것을 가리킴
파일시스템을 만들어야 파일을 보관할 수 있다. 따라서 처음 하드디스크를 사거나 윈도우를 지우는 경우 포맷을 진행하는데, 윈도우의 대표적 파일시스템은 NTFS이다.
포맷은 파일시스템을 만들어주는 것. 포맷은 이사와 비슷하다. 전에 있던 사람의 흔적을 지우고 새로 구성하는 것</p>

<p>데이터를 기록하고 저장하는 어떤 보조기억장치에 있어서 데이터에 대한 파일시스템을 구축한다면 그 기억장치의 공간은 아래와 같이 나뉘게 된다.
<img src="https://user-images.githubusercontent.com/39452092/82834154-3d42f680-9efb-11ea-9875-2804d2a82d55.jpg" alt="파일시스템_구조" /></p>

<p>부트 블록
운영체제를 주 기억장치에 올리는 역할을 하는 프로그램이 들어있는 영역
Windows에서 부트레코드와 비슷함
파괴되면 부팅이 이루어지지 않을 것.</p>

<p>수퍼 블록
디스크에 대한 다양한 정보를 저장하고 있는 곳
전체 블록의 수, 블록의 크기, 사용중인 블록의 수, 사용할 수 있는 블록의 번호, inode 리스트의 크기, 사용할 수 있는 inode의 번호 등 정보를 저장
즉 나머지 블록에 대한 정보를 저장해 놓은 곳이라고 보면 될 듯 하다.</p>

<p>inode 리스트
inode를 모아놓은 곳
한 블록에 여러개의 inode를 저장</p>

<p>데이터 블록
일반적인 파일과 디렉토리 그리고 간접 블록을 저장하는 영역</p>

<p>자세한 정보는 링크 참고</p>

<p>inode에 대하여.
<img src="https://user-images.githubusercontent.com/39452092/82834211-66fc1d80-9efb-11ea-9c15-2f4e487e5f13.jpg" alt="간접블록" /></p>

<p>하나의 파일이나 디렉토리하나는 하나의 inode(index node)를 가진다. 해당 파일이나 디렉토리를 열고자 할때 직접적으로 파일에 대한 블록을 열기 이전에 inode에 찾아가서 파일의 데이터가 몇번지 데이터블록에 담겨있는지를 알아내야, 그제서야 파일의 내용을 볼 수 있게 된다.
→ 이는 마치 포인터의 개념과 유사해보인다.</p>

<p>inode에서 파일 위치 부분은 10개의 직접 블록 포인터와 단일 간접 블록 포인터, 이중 간접 블록 포인터, 삼중 간접 블록 포인터로 구성</p>

<p>직접 블록 포인터는 파일이 저장된 블록 번호가 직접 저장</p>

<p>간접 블록 포인터는 블록 번호들을 모아놓은 블록의 번호들을 저장
직접 블록 포인터를 또다시 가리키고 있는 상태</p>

<p>정해진 블록 크기를 넘는 파일인 경우 대비한 것이 간접 블록 포인터
블록의 크기를 우리가 정할 수 있는데 그 용량을 넘어서는 경우 그 데이터를 다루기 위해.</p>

<p>단일 간접 포인터
파일 저장 블록 번호들을 모아놓은 블록의 번호를 저장해 놓는 곳</p>

<p>이중 간접 포인터
단일 간접 블록들의 블록 번호들을 모아놓은 블록의 번호를 저장해 놓는 곳</p>

<p>삼중 간접 포인터
이중 간접 블록들의 번호들을 모아놓은 블록의 번호를 저장해 놓는 곳</p>

<p>선생님 사진파일 참고</p>

<p>삼중이상을 넘어버리게 된다면? 시스템다운? 흠..
어떤 한 파일의 크기가 너무나도 커서 데이터영역에서 블록을 엄청나게 잡아먹었는데.. 그 블록의 개수가 너무나도 많아서 inode하나에 다 그 블록 주소에 대한 정보를 담을 수 없는경우..</p>

<p>이러한 것들(파일시스템과 데이터저장)이 만들어지는 곳이 하드디스크이다.
그러면 하드디스크에 대해서 알아보자.</p>

<p>포맷 : 파일시스템을 새로이 구축하는 것</p>

<p>일반포맷은 배드섹터 검출을 실시한다.
빠른포맷은 배드섹터 검출 안함
섹터는 하나하나의 디스크 공간 단위</p>

<p>플로피디스크 Floppy disk - ‘헐렁한, 늘어진, 딱딱하지않은’이라는 뜻을 지닌 플로피와 디스크가 합쳐진 말이다. 보호하기 위한 겉부분을 때서 보면 동그란 원판을 기준으로 CD와 같은 것이 있는데, 딱딱하지 않은 팔랑거리는 저장매체인 것으로 보인다.</p>

<p>HDD(Hard Disk Drive)
딱딱한 디스크
자성체로 코팅 된 알루미늄 기판에 자료를 저장할 수 있도록 만든 보조기억장치 중의 하나
자성체이므로… 일반적으로는 겉이 감싸져 있어서 자석에 영향을 안받지만 분해를 해서 강력한 자석으로 훑는경우 데이터가 소멸되거나 고장이 날 수 있는 것으로 보인다.</p>

<p>HDD 하드디스크의 상세 구조</p>

<p>플래터(Platter) - 동그란 원판
하드 디스크를 구성하는 얇은 판
코팅 된 산화금속막을 논리적으로 나누고(partition) 위치를 지정(formatting)하면 정보를 저장할 수 있음</p>

<p>스핀들(Spindle) - 디스크 모터. 플래터 중심에서 플래터가 돌아가도록 만드는 것
플래터가 회전할 수 있도록 모터와 직접 연결된 축
스핀들에 직접 연결되어있어서 ‘스핀들모터’라고 불리움</p>

<p>액츄에이터(Actuator)
헤드를 움직이는 장치
헤드가 부착된 arm(팔)을 지정한 위치까지 이동함</p>

<p>헤드(Head)
플래터 표면에 코팅된 자성체를 자화/소거하여 정보를 저장/삭제하거나 정보를 읽어들이는 장치</p>

<p>하드디스크가 돌아갈 때 나는 소리는 무슨 소리인걸까? 플래터는 상시 돌아가는데 헤드가 그 플래터에 맞닿아 나는 소리인걸까?</p>

<p>플래터 원판 하나에 액추에이터와 암이 하나씩 있는 구조이다. 원판 하나를 위아래에서 동시에 맞무는 구조인 것으로 보인다.
플래터가 여러개여도 액추에이터와 암은 단 하나만 존재하는줄 알았는데 아니었다.
액추에이터와 암, 헤드들은 움직이는건 각기 다 다르게 움직이는걸까? 아니면 다같이 움직이게 될까?</p>

<p>구글에서 섹터 이미지 검색
이미지링크 참고</p>

<p>실린더(Cylinder) - 트랙의 같은 위치의 집합
여러개의 플래터의 트랙이 수직적으로 쌓여 있는 것으로 실린더 형태를 하고 있어서 이런 이름이 붙여짐
즉! 디스크 중심축으로부터 같은 위치에 있는 트랙의 집합</p>

<p>트랙(Track) - 운동장에서 선수가 뛰는 구간
하드 디스크 기록 단위의 하나로서, 자기 매체에 늘어선 동심원으로 하나 하나를 트랙이라고 한다,
물리적으로 기록하는 부분
즉! 정보가 저장되는 동심원</p>

<p>섹터(Sector)
자기 디스크 상의 동심원상에 정보가 기록되어 있는 각 트랙을 똑같은 길이로 분할했을 때 그 일부분
디스크 상의 최소 물리적 저장 공간으로서 최소 단위가 512byte로 되어있음
실린더도, 트랙도 다 섹터가 모여있는 것임
데이터를 저장시 공간 낭비가 없음(적음?)
데이터를 읽어들이는 속도가 느림</p>

<p>메모장에 a하나만 쓰면 1KB가 된다. 이는 1024byte이다. 이는 섹터 2개가 필요한 크기
플래터가 돌고있다보니 저장했을 때 섹터위치가 연속적이지 않다. 용량의 낭비는 없지만 파일을 불러 올 때 다른 섹터들을 읽어들이려다보니까 액츄에이터의 암이 움직일 수는 없으니, 플래터가 돌아서 해당 섹터가 올때까지 기다려야한다. 따라서 읽는 속도가 느리다.</p>

<p>클러스터(Cluster)
섹터의 최소 단위의 문제점을 해결하기 위함
기본값으로 4KB(4096byte)
섹터의 집합(묶음) 8개묶음
데이터를 읽어들이는 속도가 빠름
데이터를 저장시 공간낭비가 있음</p>

<p>1KB 메모장을 저장하고자 할 때 이는 1024byte이다. 512byte 섹터단위로 데이터를 저장했을 때에는 비연속적이었으나, 이제는 연속적으로 저장할 수 있다. 따라서 데이터를 읽어들이는 속도가 빠르다. 단 남은 공간(약 3KB)은 낭비가 되어버린다.</p>

<p>지금 우리는 클러스터방식으로 디스크를 쓰고 있다. 내 PC에서 디스크를 오른쪽 클릭하여 포맷버튼을 눌러보면 할당단위크기 기본값 4096바이트이다. 즉 데이터 저장의 기본 단위를 4KB로 지정해놓겠다고 되어있다.
너무 크게 잡으면 속도는 빠르지만 그만큼 적은 용량의 데이터를 저장시 낭비가 심해진다.
파일시스템은 NTFS로밖에 못하도록 되어있다.</p>

<p>USB같은 경우에도 4096바이트가 기본 할당단위 크기이다.</p>

<p>디스크 할당단위에서 512byte로서  1 섹터단위로까지 데이터 저장의 기본단위를 다르게 만들 수 있다. 작을수록 데이터 공간의 낭비는 적어지지만 속도가 느려진다는 점을 고려하자.
→ 512Byte를 기본으로 둔 상태에서 큰 데이터를 보관할 때 섹터를 연속적으로 붙여서는 기록하지 못하는건가?</p>

<p>하드디스크는 파일시스템 NTFS밖에 없는데 몇몇 USB의 파일시스템 구성에 보면 FAT32로 바꿀 수 있다. FAT32란?</p>

<p>FAT32
한물 간 파일시스템. 보안이 없음. (속성의 보안탭이 존재하지 않음. 즉 접근제한 걸기 불가)
4GB이상은 그 시스템적 구성을 만들 수 없다. 따라서 4GB이상의 공간을 만들고 데이터를 저장하려면 → NTFS로 파일시스템을 만들어야한다.</p>

<p>HDD의 형식</p>

<p>MBR(Master Boot Record)와 GPT(GUID Partition Table)
사용할 수 있는 디스크 종류는 크게 2가지로 되어있음</p>

<p>MBR은 전통적인 BIOS(Basic Input Output System) 방식의 시스템에서 사용되고 있는 디스크 형식(우리가 쓰고 있는 형식)</p>

<p>GPT는 새롭게 개발된 EFI(Extensible Firmware Interface)방식의 시스템에서 사용되고 있는 디스크 형식
GPT는 BIOS 방식의 시스템에서는 사용할 수 없음
→ 그 반대는? EFI 시스템에서는 MBR방식을 쓸 수 있는가?
정리하면, 디스크에 관한 정보를 담는데는 MBR이냐 GPT냐로 나뉘게 됨</p>

<p>MBR은 디스크에서 부팅에 관한 정보를 담고 있는 440byte의 Mater Boot Code 영역과 파티션에 대한 ‘정보’를 담고 있는 64byte의 Partition ‘Table’ 영역이 있음</p>

<p>하나의 물리적인 공간을 논리적으로 분리 - 파티션
우리가 하나의 물리적 하드디스크 드라이브에 있어서 C:\ 만 만들수도 있지만 드라이브를 더 분리하여 만들 수 있다. E: F: 등
C를 만드는 것도 파티션 생성인데 더 만드는 것은 파티션 분할이다.</p>

<p>여러개로 나누면 관리하기 편하고 고장이 났을때 복구하기 용이하다.</p>

<p>Primary(주) Partition Table에 기록이 되는 파티션(공간)정보는 개당 최소 16byte.
파티션 테이블영역에는 64Byte까지만 정보를 담을 수 있으므로 MBR에서는 Primary Partition을 4개까지만 생성 가능
(참고로 GPT는 Primary Partition을 무려 128개까지 생성가능. 거의 무제한급 → 따라서 기업쪽에서 주로 쓴다.)</p>

<p>MBR은 최대 Primary Partition 생성 개수가 4개까지라는 제한으로 인해 이를 해결하고자 Extended(확장) Partition과 Logical(논리) Partition을 생성해야만 5개 이상 생성할 수가 있음</p>

<p>파티션 4개를 다 주 파티션으로 만들어버리면 4개 초과하여 파티션을 더 만들수가 없다.(논리파티션조차도 더 만들 수 없다)
3개까지만 주 파티션으로 만들고 남은 하나를 Extended 파티션으로 쓰고 그 안에 논리파티션을 하나 이상 만드는 방식으로서 만들 수 있다.</p>

<p>파티션은 독립적인 저장공간. 하나의 책장에 여러가지 칸막이를 만듬으로서 공간을 구분하는 것과 유사하다.</p>

<p>Extended는 틀을 잡아주는 용도. 직접적으로 데이터를 저장하는 것이 아니다. 저장하는 것은 Logical에 저장하는 것임
Extended를 없애버리면 Logical도 전부다 사라진다.
Logical 하나를 제거해도 Extended는 사라지지 않는다.(Logical을 전부 없애버리면?)</p>

<p>만약 파티션을 4개 만들 때 주 파티션 4개로 만드는게 아니라 파티션 3개를 만들고 하나는 Extended로서 Logical 하나만 둘 수 있을까? → 가능 할 것으로 보인다.</p>

<p>스타크래프트에서 저그의 크립이 extended이고 그 내부에만 무언가를 만들 수 있는데 뭐 만든게 logical이다.(프로토스로 치면 파일럿으로 생긴 영역과 그 안에 지은 건물들)</p>

<p>리눅스는 디스크의 이름이 무엇인가?
윈도우는 C.. 왜 C부터 시작인가?</p>

<p>HDD Type</p>

<p>IDE(Intergrated Drive Electronic) HDD는 CPU에서 직접관리하기 때문에 부팅 중에는 장착할 수 없음
전원을 끄고 장착을 하고 컴퓨터를 켜야 인식이 됨</p>

<p>IDE이름 형식(물리디스크 추가시)
hd+문자 : hda, hdb, hdc, hdd, hde 등등. 우리가 정하는 것이 아니라 자동으로 부여해줌
                                 —
          └&gt; CD-ROM의 이름으로 쓰므로 사용자가 사용 불가능하다. → 해당 이름으로는 부여가 안되는 듯 하다.</p>

<p>SCSI(Small Computer System Interface) HDD는 CPU에서 직접 관리하지 않으며 내부의 scsichip에서 직접 관리함
부팅중에도 장착할 수 있으나 인식을 하지 못하므로 반드시 재부팅 후에 사용가능
→ 근데 부팅중에 하드를 부착할 수나 있나? 아니 부착해서 쓰는 사람이 있어??</p>

<p>이름형식(물리디스크 추가시)
sd + 문자 : sda, sdb, sdc, sdd, sde 등등. 역시나 우리가 선택할 수 있는 것이 아니라 자동부여</p>

<p>참고로 CentOS 5.x(이하)에서는 IDE HDD와 SCSI HDD의 장치명 작명이 위의 내용대로 동일함(분리해서 작명이 이루어짐. hda와 cda가 동시존재 가능)
CentOS 6.x(이후)부터는 IDE HDD와 SCSI HDD의 장치명을 sd + 문자로 통합했음
(IDE와 SCSI가 동시에 있다면 sda sdb 라는 이름으로 존재하게 됨)</p>

<p>Partition Type - 물리드라이브 하나에 있어서 그 내부 상세 파티션이름은 우리가 정할 수 있다.</p>

<p>IDE HDD(hd + 문자)+숫자 : hda1, hdb2, hdd3, hde4 등등</p>

<p>SCSI HDD(sd + 문자 ) + 숫자 : sda1, sdb2, sdc3, sdd4 등등</p>

<p>Logical 파티션은 5번부터 쓸수만 있다. 왜냐하면 파티션을 5개 이상 만들 때 논리파티션이 5번부터 시작하게 되므로 그냥 5번부터만 쓸 수 있게 만들어놓음,
(주 파티션이 1~3번을 차지하게 되고 Extended가 4번을 차지하게 됨)</p>

<p>HDD 추가(IDE HDD)
OS전원을 꺼야 VMware에서 해당 항목을 추가할 수 있다. 따라서 전원을 꼭 끄자.
SCSI는 전원을 끄지 않아도 추가가 가능하다.</p>

<p>IDE HDD삭제
전원을 꺼야 삭제가 가능하다.</p>

<p>VMware에서 우리가 쓰는 리눅스OS에 IDE HDD추가를 완료하고 전원을 키자</p>

<p>HDD 확인
Power on this virtual machine으로 전원을 키자. 오른쪽 아래에 하드디스크 아이콘이 두개이다.</p>

<p>putty로 재접속
(집에서 왜 안되나 했더니 IP가 바뀌어있다. 으잉. 드디어 바뀌는걸 보는구나)</p>

<p>디스크관리 명령어
fdisk  -  윈도우에서는 diskpart라는 명령어를 쓴다. 실행창에 diskpart 또는 cmd창에 diskpart를 치니 무언가 동작되려 한다.</p>

<p>사용형식
fdisk [option]</p>

<p>option
-l : HDD의 목록을 확인</p>

<p>fdisk -l 을 입력해보자. 그러면 /dev/sda 와 /dev/sdb에 대한 정보가 나온다.</p>

<p>/dev/sda
장치관리자 device 하위에 리눅스 OS관련 우리가 처음에 있던 그 드라이브가 있다.</p>

<p>/dev/sdb
우리가 새로 추가한 IDE 디스크 장치이름이다. sdb라는 이름으로 추가가 되었다.</p>

<p>fdisk -l 장치명
[root@localhost ~]# fdisk -l /dev/sdb
→ 특정 장치에 대한 정보만 출력</p>

<p>현재 디스크의 공간은 있는 상태이지만 파티션이 존재하지 않아 아무것도 할 수가 없다.
파티션을 만들고 파일시스템을 구성시켜줘야한다. (리눅스에서는 마운트도 필요)</p>

<p>한가지 참고사항은, sda든 sdb든 디스크 드라이브의 크기가 불명확하다는 것이다.
흠..
그리고 우리가 사는 하드디스크등은 왜 2 4 8 과 같은 2의 지수승단위로 떨어지는걸까?
또한, 항상 사면 저 용량만큼 공간이 확보되어있지 않은 이유는 왜일까?</p>

<p>Partition 생성</p>

<p>사용형식
문서편집기를 써서 문서를 편집했던 것처럼..
fdisk 장치명</p>

<p>[root@localhost ~]# fdisk /dev/sdb
→ 해당 장치에 대해 편집? 설정모드로 들어가게 된다.</p>

<p>fdisk에서 사용할 수 있는 명령어(m 입력시 나옴)</p>

<p>d : 파티션 삭제(delete)
l : 파티션 타입 리스트 출력(list) → 엄청나게 많은 파티션 타입이 나온다.
m : 도움말 출력
n : 파티션 생성(new)
p : 파티션 테이블 출력(print 생성되어있는 파티션에 대한 정보를 출력)
q : 저장하지 않고 종료(quit)
t : 파티션 시스템 ID 변경 → 어디에 쓰는지는 모르겠음
w : 저장하고 종료(write)</p>

<p>현재 어떤 파티션도 존재하지 않는 상태이다. 주파티션도 존재하지 않는다. 
주파티션은 꼭 있어야하는가? 처음부터 Extended와 Logical로만 구성할 수는 없는건가? 
→ 그렇게 구성이 가능하네.. 그럼 주파티션이 있을 이유가 없는데 왜 있는걸까..</p>

<p>Primary(주) Partition 생성
n으로 새로운 파티션 생성하기 → p (또는 엔터로 기본값. primary) → 헷갈리지 않게 기본 숫자 순서대로 번호 부여 → 시작섹터 값또한 기본값으로 지정 → 마지막 섹터를 지정할 수 있는데, 시작섹터와 마지막섹터 번호의 값으로 그 용량을 정할 수 있다. 섹터번호는 컴퓨터가 보기 편하고 사람은 용량으로 계산하는 것이 편하므로 아래와 같이 입력
+500M (플러스기호와 용량 및 단위 입력) → 자동으로 섹터번호를 추출하여 생성이 완료가 된다. 1GB의 공간에 500M의 주파티션공간이 생성되었다.</p>

<p>p를 누르면 만든 것이 나온다.
Device → 장치명
Boot → 부트 파티션일 경우 *이 생김
Start → 섹터의 시작
End → 섹터의 마지막
Blocks → 용량(섹터의 시작과 마지막 사이의 블록 수) ⇒ 섹터수가 아닌 블록수이다. 섹터를 모아놓은 집합단위가 블록인듯
Id와 System → Linux의 ID값</p>

<p>n으로 파티션을 4개 만든 경우 더이상 n으로 파티션을 만들수가 없다. 주파티션도 더 만들 수 없고 extended도 만들수가 없다. 4개 만든 상태에서 n을 누르면 안된다고 나온다. d로 파티션을 제거해주어야한다. (파티션이 하나밖에 존재하지 않는 경우 d를 누르면 자동으로 하나만 있는 것이 제거가 된다.)</p>

<p>Extended(확장) Partition 생성
n → e → 2또는 기본값 → 섹터 기본값 → 용량은 +300M</p>

<p>p로 확인가능</p>

<p>섹터의 값은 절대 겹치지 않는다.</p>

<p>Extended안에 Logical(논리) Partition 생성
n → primary만들 수 있는 개수 하나 준 것 확인해라. extended가 primary 공간 하나 먹음. e는 하나 만들었으니 Extended는 생성 불가능하고 이제 l(Logical) 로 뜬다. l 입력
파티션은 5번으로 자동으로 추가된다.</p>

<p>용량을 잡을 때 +300MB 하면 Value out of rage뜬다.(현재 Extended 총 용량이 300MB)
딱 똑같이 300MB를 꽉 채울 수는 없는 것같다.
그냥 엔터를 치면 남은 용량을 다 잡게 된다. (마지막 섹터에 대한 값이 기본적으로 끝섹터값을 가리키고 있다)</p>

<p>299M으로 Logical 파티션이 Extended안에 생성이 되었다. 이제 p를 입력하고 엔터를 쳐보자.</p>

<p>p를 눌렀을 때 나오는 목록에서 어떤 것이 주파티션이고 어떤것이 Extended이며 어떤것이 Logical인지 파악하려면…</p>

<p>확장인지는 Extended를 보면 되고 논리인지는 Device쪽 번호를 보면 알 수 있다(5번 다음의 값들)
또는 논리파티션의 섹터값이 extended 파티션의 섹터값 안에 들어가있는 것을 통해 구분 할 수 있다.
그 외의 것들은 주 파티션이라고 보면 될 것 같다.</p>

<p>끝낼 때 q를 누르면 다 저장이 안되고 종료된다.
w를 눌러 저장 및 종료</p>

<p>참고로 
The partition table has been altered!</p>

<p>Calling ioctl() to re-read partition table.
위 문구 사이에 
… The new table will be used at the next reboot …  문구가 나오면 재부팅 반드시 할 것.</p>

<p>여기까지 우리는 파티션 틀을 만들었다. 하지만 이 상태로는 파일을 저장할 수 없다.
여기에 파일시스템을 만들어야한다.
장치추가 → 확인 → 파티션생성 → 포맷(파일시스템생성) → 마운트</p>

<p>포맷(MaKe FileSystem)
새로운 파일 시스템을 생성</p>

<p>사용형식
mkfs [option] [argument] 장치 또는 파티션이름
→ 하나의 장치에 통째로 파일시스템을 구축할 수도 있고 파티션별로 다른 파일시스템을 구축할 수도 있는 것 같다.</p>

<p>option
-t : 파일 시스템 타입 정하는 옵션(type)</p>

<p>파일 시스템 종류
CentOS 5.x → ext3
CentOS 6.x → ext4
CentOS 7.x → xfs  ⇒ 요게 우리가 쓸 파일시스템이다.</p>

<p>xfs쪽으로 갈 수록 파일시스템의 발전이 이루어졌다. ext3같은 경우에는 한 디렉토리 내에 약 3만개정도의 파일을 둘 수 있었다면 ext4에서는 약 6만개정도? 파일을 둘 수 있게 되는 등..</p>

<p>예를 들어 
CentOS 5.x대에서는
mkfs -t ext3 /dev/sdb1
또는
mkfs.ext3 /dev/sdb1</p>

<p>CentOS 6.x대에서는
mkfs -t ext4 /dev/sdb1
또는
mkfs.ext4 /dev/sdb1</p>

<p>CentOS 7.x대에서는
mkfs -t xfs /dev/sdb1
또는
mkfs.xfs /dev/sdb1</p>

<p>⇒ 근데 쓰는 형식들 보면 다 파티션이름을 쓴 것 같은데 mkfs.xfs /dev/sdb 이렇게 쓸 수 있는 것 아닌가? 이러면 장치 전반적으로 파일시스템 구축이 되는건가.
그리고 파티션을 생성하면 /dev/sdb/sdb1 뭐 이런식으로 되는 건줄 알았는데 sdb라는게 사라지고 그게 세분화되어 sdb1 sdb2 뭐 이렇게 되는건가보다.</p>

<p>→ 7이상 OS에서는 하위 파일시스템을 쓸 수는 있지만 별로 좋지 않은 선택이다.
마치 지금 우리 윈도우에서 NTFS를 쓰는게 아니라 FAT32을 쓰려고 하는 것과 같은 선택</p>

<p>[root@localhost ~]# mkfs -t xfs /dev/sdb1  → 그러고보니 mkfs 명령어는 fdisk 명령어로 들어간 상태에서 치는 명령어가 아니네.
Primary Partition은 포맷 가능</p>

<p>[root@localhost ~]# mkfs -t xfs /dev/sdb2
Extended Partition은 사용하는 용도가 아닌 틀이므로 포맷 불가능
→ -f 옵션(force)있던데..</p>

<p>[root@localhost ~]# mkfs -t xfs /dev/sdb5   ← 넘버 5부터 Logical이다!!
Logical Partition은 포맷 가능</p>

<p>이제 파일시스템까지 만들었으므로 우리가 어떤 파일을 저장할 수 있다.
→ 하지만 못한다. 왜?</p>

<p>[root@localhost ~]# ls -l /dev/sdb1
brw-rw—-. 1 root disk 8, 17  6월  5 11:45 /dev/sdb1</p>

<p>[root@localhost itbank]# ls -l /dev/sdb2
brw-rw—-. 1 root disk 8, 18  6월  5 18:09 /dev/sdb2 → Extended</p>

<p>[root@localhost ~]# ls -l /dev/sdb5
brw-rw—-. 1 root disk 8, 21  6월  5 11:46 /dev/sdb5
리눅스에서는 장치를 파일화하여 쓴다. 즉 우리가 추가한 하드가 파일형태이다. 파일안에 어떤 디렉토리나 파일을 넣을 수는 없다.
b 블록 파일(블록파일 말고도 c라고 해서 캐릭터파일이 있다)</p>

<p>마운트를 해야한다. 장치를 사용할 때 써야하는 명령어이다.</p>

<p>sdb2를 마운트해버린다면?
그리고 우리가 쓰는 이 기본 20GB의 장치는 언제나 마운트가 자동으로 되어있는 상태인건가?</p>

<p>마운트(mount)
파일 시스템을 디렉토리 일부에 넣어서 이용가능하게 하는 작업
다시 말해, 장치파일을 디렉토리처럼 사용하는 것을 마운트라 함
서버의 자원을 사용하는 것(다루는 것)이므로 관리자만 사용가능</p>

<p>우리는 /dev/sdb1 파티션에 대한 디렉토리를 만들어줘야한다.
/hello 라는 디렉토리를 만들어도 /dev/sdb1 와 같은것이 아니다. 하지만 이것을 마운트하면..</p>

<p>mount /dev/sdb1 /hello
→ /dev/sdb1/이 /hello를 마운트하겠다. 마운트하면 /dev/sdb1 == /hello 가 된다.</p>

<p>/hello 하위에서 작업을 하면 이는 사실 /dev/sdb1 하위에 작업을 하는 것이 된다.</p>

<p>마운트해제를 하면 /hello는 원래대로 돌아온다. 원래 있었던 파일들이 뜨게 됨.
/dev/sdb1을 /hi 라는 디렉토리에 다시 마운트 하면 /hi에 있는 기존의 내용은 안보이고(?) 아까 우리가 /hello에 넣었던 즉, /dev/sdb1 에 넣었던 파일들이 /hi에서 보이게 된다.</p>

<p>재부팅을 하면 마운트가 빠지므로 다시 마운트를 해야하는데 사실 장치에 대해 재부팅을 해달라고 하면 이는 마운트를 다시 해야한다는 의미이기도 하며, 마운트를 직접 해제했다가 다시 마운트시켜도 된다. (아까 하드디스크에 대해 파티션분할을 하고 w로 나갔을 시 리부팅이 필요할 수도 있다고 했는데 그런 경우에 대해서도?)</p>

<p>이로서 어떤 하드디스크를 리눅스에 있어서 우리가 실질적으로 쓰려면
장치추가 → 확인 → 파티션 추가 →  포맷(파일시스템 구축) → 마운트
라는 과정을 거쳐야 함을 알 수 있게 되었다.</p>

<p>윈도우는 어떠한 과정을 거치게 되는 걸까?</p>

<p>궁금한 것.
Logical 파티션은 무조건 5번부터 시작이 가능한 것 같은데
그러면 Primary와 Extended는 1~4번을 두고 쓸수만 있는 것인가? 그런거같긴하다.</p>

        
      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#linux" class="page__taxonomy-item" rel="tag">Linux</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2020-05-26T00:00:00+09:00">May 26, 2020</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Linux_day19%20https%3A%2F%2Fictechgy.github.io%2Flinux%2FLinux_day19%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fictechgy.github.io%2Flinux%2FLinux_day19%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fictechgy.github.io%2Flinux%2FLinux_day19%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/linux/Linux_day18/" class="pagination--pager" title="Linux_day18
">이전</a>
    
    
      <a href="/linux/Linux_day2/" class="pagination--pager" title="Linux_day2
">다음</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">참고</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/photo-hangang.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/python-map/" rel="permalink">파이썬 Map 함수는 중첩해서 쓸 수 있을까? (Python Map)
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description"> 

Python Map함수는 중첩이 가능할까?
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/photo-hangang.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/rxswift/error/" rel="permalink">signal과 driver 그리고 error handling에 대하여(RxSwift)
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description">이 글을 읽기 전 eungding님의 블로그와 Rhyno님의 블로그글을 참고해보자.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/photo-hangang.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/rxswift/take/" rel="permalink">take Operator에 대하여(RxSwift)
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description">flatMap에서 take를 써야하는 경우
단도직입적으로 말하자면 아래와 같은 경우에는 반드시 써야한다.
_ = button.rx.tap.debug("TAP")
            .flatMap {
                return BehaviorRelay(value: ...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/photo-hangang.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/rxswift/zip/" rel="permalink">zip Operator에 대하여(RxSwift)
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description">zip은 대표적인 Observable 병합 연산자이다.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
      
        
      
        
          <li><a href="https://github.com/ictechgy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 dev blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "https://ictechgy.github.io/linux/Linux_day19/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/linux/Linux_day19"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://ictechgy-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
